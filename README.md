# vue-telegram-bot

## Инструкция по установке:

1) Загрузите архив из репозитория и распакуйте на компьютере
2) Создайте в каталоге ../vue-telegram-bot-master/express-server/ файл ".env" (без расширения) со следующим содержимым:
```bash
   YOUR_TELEGRAM_BOT_TOKEN='ваш токен телеграм бота'
   NGROK_URL='сервер https на котором будет находится бот'
```
3) Замените текст в переменных на Ваши данные. Для сервера https можно использовать ngrok.  
4) Откройте командную строку (cmd) и перейдите в корневую папку проекта 'cd /путь/к/вашему/проекту'.  
5) Установить node.js с официального сайта.  
6) Установите все необходимые зависимости командами (npm install 2 раза):
```bash
   npm install
   npm run build
   cd express-server
   npm install
```
7) Запустите бота командой:
```bash
   node bot.js
```

## Если у Вас нет сервера https, можно использовать ngrok локально:

1) Скачайте архив ngrok с официального сайта, для это нужно авторизоваться на сайте.
2) Перейдите в раздел Your Authtoken и скопируйте свой токен.
3) Распакуйте архив в любое удобное место.
4) Запустите ngrok.exe
5) В открывшемся окне введите команду:
```bash
   ngrok config add-authtoken <ваш токен>
   ngrok http 3000
```
7) В повившемся окне скопируйте https, например:  
   https://1111-11-11-111-11.ngrok-free.app  
   Откройте в проекте ранее созданный Вами файл .env и вставьте:  
```bash
  YOUR_TELEGRAM_BOT_TOKEN='ваш токен телеграм бота'
  NGROK_URL=https://1111-11-11-111-11.ngrok-free.app
```
9) Перезапустите бота ctrl+c и запустите 'node bot.js'

## Ваш бот запущен!, чтобы получить токен Telegram найдите BotFather и следуйте инструкциям.

# Функционал бота:

## Автоматическое определение языка:
Приложение автоматически определяет язык интерфейса на основе языка, установленного в Telegram
Если язык Telegram установлен на русский, интерфейс приложение на русском. Во всех остальных случаях интерфейс на английском

## Страница с блоками зодиаков:
После открытия приложения пользователь видет страницу с 12 блоками, каждый из которых представляет один знак зодиака
Дизайн блоков удобный и интуитивно понятный
В каждом из контейнеров кликабельного элемента находиться Название зодиака + Период дат для него + Иконка

## Получение данных с API:
Для получения описания каждого знака зодиака делается POST запрос по API
Описание загружаться динамически при нажатии на соответствующий блок зодиака

## Отображение и скрытие описания зодиака:
При нажатии на кнопку с соответствующим зодиаком должно появляться описание для выбранного знака
В окне описания есть кнопка “X” из официальной документации Telegram miniapps для закрытия приложения
Также описание закрывается при свайпе вправо (для мобильных устройств)

## Переключение языка вручную:
В интерфейсе есть возможность вручную переключать язык между русским и английским, независимо от настроек Telegram.
Переключение языка обновляет все тексты в приложении, включая описания знаков зодиака.

## Адаптивный дизайн:
Приложение адаптивно и корректно отображается на всех устройствах, поддерживаемых Telegram mini apps.

# Комментарии от разработчика

Приложение выполнено на Vue.js и одной страничке, поэтому для демонстрации использования Telegram miniapps, при нажатии на крестик приложение закрывается, для исправления можете в файле HoroscopeComponent (vue-telegram-bot-master\src\components) уберите часть кода:  
```bash
   if (window.Telegram && window.Telegram.WebApp) {  
     window.Telegram.WebApp.close();  
   }  
```
и снова запустите npm run build  
  
Уже в ходе разработке понял, что нужен будет express.js, нужно было создать две директории frontend и backend для удобства - обратил внимание поздно, мой недочет. Если это критично, то могу исправить.

